<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="_csrf" th:content="${_csrf.token}"/>
	<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
	<title>AdminLTE 3 | DataTables</title>

	<!-- Google Font: Source Sans Pro -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
	<!-- Theme style -->
	<link rel="stylesheet" href="../../dist/css/adminlte.min.css">
	<!-- Toast Grid -->
	<link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />

	<!-- jQuery -->
	<script src="../../plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap 4 -->
	<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- AdminLTE App -->
	<script src="../../dist/js/adminlte.min.js"></script>
	<!-- Toast Grid -->
	<script src="https://uicdn.toast.com/tui-grid/latest/tui-grid.min.js"></script>
</head>
<body class="hold-transition sidebar-mini">
	<div class="wrapper">

		<!-- ìƒë‹¨ ë©”ë‰´ -->
		<nav th:replace="~{includes/navbar :: navbar}"></nav>

		<!-- ì¢Œì¸¡ ë©”ë‰´ -->
		<aside th:replace="~{includes/sidebar :: sidebar}"></aside>

		<nav th:replace="~{includes/modals/mesCodeValidate :: mesCodeValidate}"></nav>
		
		<nav th:replace="~{includes/modals/bomItemAdd :: bomItemAdd}"></nav>
		
		<nav th:replace="~{includes/modals/bomDetailAdd :: bomDetailAdd}"></nav>

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- ì½˜í…ì¸  í—¤ë” (Page header) -->
			<nav th:replace="~{includes/pageHeader :: pageHeader}"></nav>
			
			<!-- ë©”ì¸ ì½˜í…ì¸  -->
			<section class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-12">
							<div class="card">
								<div class="card-header">
									<div class="row">
										<div class="col-6">
											<p class="font-weight-bold" style="margin-bottom: 0px; padding-top: 8px;">BOM</p>
										</div>
										<div class="col-6">
											<div class="card-tools" style="text-align: right;">
												<input type="button" id="btn_bom_add_row" class="btn btn-primary" value="í–‰ì¶”ê°€" style="display : none;">
												<input type="button" id="btn_bom_remove_row" class="btn btn-primary" value="í–‰ì‚­ì œ" style="display : none;">
												<input type="button" id="btn_bom_toggleEditMode" class="btn btn-primary" value="í¸ì§‘">
												<input type="button" id="btn_bom_modify" class="btn btn-primary" value="ì €ì¥">
												<input type="button" id="btn_bom_delete" class="btn btn-primary" value="ì‚­ì œ">
											</div>
										</div>
									</div>
								</div>
								<div class="card-body" id="bomGrid">
									<!-- Toast Grid Ajax -->
								</div>
							<!-- /.card-body -->
							</div>
						<!-- /.card -->
						</div>
					<!-- /.col -->
					</div>
				<!-- /.row -->
				<div class="row">
					<div class="col-12">
						<div class="card">
							<div class="card-header">
								<div class="row">
									<div class="col-6">
										<p class="font-weight-bold" style="margin-bottom: 0px; padding-top: 8px;">BOM ìƒì„¸</p>
									</div>
									<div class="col-6">
										<div class="card-tools" id="btn_group_bomDetail" style="text-align: right; display: none;">
											<input type="button" id="btn_bomDetail_modal" class="btn btn-primary" value="ì¶”ê°€">
											<input type="button" id="btn_bomDetail_add" class="btn btn-primary" value="ì €ì¥">
											<input type="button" id="btn_bomDetail_delete" class="btn btn-primary" value="ì œê±°">
										</div>
									</div>
								</div>
							</div>
							<div class="card-body" id="bomDetailGrid">
								<!-- Toast Grid Ajax -->
							</div>
						<!-- /.card-body -->
						</div>
					<!-- /.card -->
					</div>
				</div>
				<!-- /.row -->
				</div>
			<!-- /.container-fluid -->
			</section>
		<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->
		<!-- ì¢Œì¸¡ ë©”ë‰´ -->
		<footer th:replace="~{includes/footer :: footer}"></footer>
		<!-- /.ì¢Œì¸¡ ë©”ë‰´ -->
		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
		<!-- Control sidebar content goes here -->
		</aside>
	<!-- /.control-sidebar -->
	</div>
	<!-- ./wrapper -->
	
	<style>
	    .selected-row {
	        background-color: #d1ffd6;
	    }
	    .deselected-row {
	        background-color: #ffd1d1;
	    }
		.modal-custom-size {
			max-width: 1300px;
		}
	</style>
	
	<!-- Page specific script -->
	<script th:inline="javascript">
		// BOM
		let bomGrid = null;
		const bomUrl = '/manufacture/bom';
		const bomDataSource = {
			api: {
			    readData: {url: bomUrl, method: 'GET'},
				modifyData: { url: bomUrl, method: 'PUT' },
				deleteData: {url: bomUrl, method: 'DELETE', headers: {'X-Delete-IDs': ''}}
			},
			contentType: 'application/json',
	    };
		let bomCurrentSelectedRowKey = null;
		let bomCurrentSelectedID = null;
		let bomIsEditModeEnabled = false; 
		const bom_columns = [
            {header: 'BOM ì½”ë“œ', name: 'BOM_ID', align: 'center', sortable: true, editor: null},
            {header: 'í’ˆëª© ì½”ë“œ', name: 'ITEM_ID', align: 'center', sortable: true, editor: null},
            {header: 'í’ˆëª©ëª…', name: 'ITEM_NAME', align: 'center', editor: null},
            {header: 'ìƒìœ„ ì½”ë“œ', name: 'PARENT_ID', align: 'center', sortable: true, editor: null},
            {header: 'BOM ê°œìˆ˜', name: 'BOM_QUANTITY', align: 'center', sortable: true, editor: null},
        ];
		
		// BOM ìƒì„¸
		let bomDetailGrid = null;
		const bomDetailUrl = '/manufacture/bomDetail';
		const bomDetailDataSource = {
			api: {
				createData: {url: bomDetailUrl, method: 'POST'},
			    readData: {url: bomDetailUrl, method: 'GET', initParams: { BOM_ID: '' }},
			    deleteData: {url: bomDetailUrl, method: 'DELETE', headers: {'X-Delete-IDs': ''}}
			},
			contentType: 'application/json',
		};
		let bomDetailCurrentSelectedRowKey = null;
		const bomDetail_columns = [
		    {header: 'BOM ìƒì„¸ ì½”ë“œ', name: 'BOM_DETAIL_ID', align: 'center', sortable: true, editor: null, hidden: true},
            {header: 'êµ¬ì„± ìš”ì†Œ ì½”ë“œ', name: 'COMPONENT_ID', align: 'center', sortable: true, editor: null},
            {header: 'êµ¬ì„± ìš”ì†Œëª…', name: 'COMPONENT_NAME', align: 'center', editor: null},
            {header: 'ê¸°ì¤€ë‹¨ìœ„', name: 'UNIT', align: 'center', editor: null},
            {header: 'ì†Œìš”ëŸ‰', name: 'REQUIRED_AMOUNT', align: 'center', sortable: true, editor: null},
		    {header: 'BOM ì½”ë“œ', name: 'BOM_ID', align: 'center', sortable: true, editor: null, hidden: true},
		];
		
		const TextInputRenderer = function(props) {
			const el = document.createElement('input');
			el.type = 'text';
		 	el.style.width = 'calc(100% - 10px)';
		 	el.style.padding = '6px 7px';
		  	el.style.border = 'solid 1px #ddd';
		  	el.style.margin = 'auto 5px';
		  	
		  	this.el = el;
		  	this.render(props);
		}

		TextInputRenderer.prototype.getElement = function () {
			return this.el;
		}
		
		TextInputRenderer.prototype.render = function (props) {
			this.el.value = props.value;
		}
		
		const TextInputBtnRenderer = function(props) {
		    const container = document.createElement('div');
		    container.style.display = 'flex';
		    container.style.alignItems = 'center';
		    container.style.gap = '5px';
		    
		    const el = document.createElement('input');
		    el.type = 'text';
		    el.style.width = 'calc(100% - 10px)';
		    el.style.padding = '6px 7px';
		    el.style.border = 'solid 1px #ddd';
		    el.style.color = 'solid 1px #ddd';
		    el.style.marginLeft = '1px';
		    el.setAttribute('disabled', true); // ì…ë ¥ ë° í´ë¦­ ë¹„í™œì„±í™”
			
			container.appendChild(el);
			
			// BOM_ID, ITEM_ID ê¸°ì¡´ê°’ì€ ìˆ˜ì • ë¶ˆê°€ ì¡°ê±´
			if (!((props.columnInfo.name == 'BOM_ID' || props.columnInfo.name == 'ITEM_ID')
				&& bomGrid.getValue(props.rowKey, 'isNew') == null)) {
				const button = document.createElement('button');
			    button.textContent = 'ğŸ”';
			    button.style.border = 'solid 1px #007BFF';
			    button.style.background = 'white';
			    button.style.color = 'white';
			    button.style.padding = '6px 10px';
			    button.style.cursor = 'pointer';
			    button.style.borderRadius = '4px';
			    button.style.marginRight = '5px';
				
				container.appendChild(button);
					
				button.addEventListener('click', function() {
					const row = props.rowKey;
					const column = props.columnInfo.name;
					// props.formattedValueë¡œ ê°€ì ¸ì˜¤ë©´ ëª¨ë‹¬ ë‹¤ì‹œ ë„ìš¸ ë•Œ ê°’ì„ ëª»ë°›ì•„ì˜´.
					const value = bomGrid.getValue(row, column);
					
					switch (column) {
						case 'BOM_ID':
							$("#inputCodeText").val(value);
							$("#gridCheckedRow").val(row);
							$("#gridCheckedColumn").val(column);

							tableName = "BOM";
							tableCodeId = "BOM_ID";
							copyGrid = bomGrid;
							
							$('#mesCodeValidate').modal();
							
							break;
						case 'ITEM_ID':
							$("#itemRow").val(row);
							$("#itemColumn").val(column);
						
							$('#bomItemAdd').modal();
							
							break;
					}
			    });
			}
			
		    this.el = container;
		    this.input = el;
		    this.render(props);
		}

		TextInputBtnRenderer.prototype.getElement = function () {
		    return this.el;
		}

		TextInputBtnRenderer.prototype.render = function (props) {
		    this.input.value = props.value;
		}
		
		const CheckboxRenderer = function(props) {
		    const el = document.createElement('input');
		    el.type = 'checkbox';
		    el.checked = (props.value === 'Y');  // ì´ˆê¸°ê°’ ì§€ì •
		
			el.addEventListener('change', function() {
		        props.grid.setValue(props.rowKey, props.columnInfo.name, el.checked ? 'Y' : 'N'); // ì¦‰ì‹œ ê°’ ì—…ë°ì´íŠ¸
		    });
		    		
		    this.el = el;
		};

		CheckboxRenderer.prototype.getElement = function() {
		    return this.el;
		};

		CheckboxRenderer.prototype.getValue = function() {
		    return this.el.checked ? 'Y' : 'N';
		};

		CheckboxRenderer.prototype.mounted = function() {
		    this.el.focus();
		};

		$(function () {
			bomInit();
		});
		
		// BOM
		function bomInit() {
			bomGrid = new tui.Grid({
		        el: document.getElementById('bomGrid'),
		        data: bomDataSource,
		        scrollX: true,
		        scrollY: true,
		        bodyHeight: 250,
		        rowHeaders: ['checkbox'],
				editingEvent: 'click',
		        columns: bom_columns,
		    });

		    bomGrid.on('failResponse', function(ev) {
		        alert(JSON.parse(ev.xhr.responseText).message);
		    });
			
			bomGrid.on('editingStart', function(ev) {
			    const {rowKey, columnName, value} = ev;
			    const rowData = bomGrid.getRow(rowKey);
				
				// PK ìˆ˜ì • ë¶ˆê°€ && ìƒˆë¡œ ì¶”ê°€ëœ í–‰ì€ ì‘ì„± ê°€ëŠ¥
// 				if (columnName == 'BOM_ID' && !rowData.isNew) {
// 				if (columnName == 'MANAGER_ID') {
// 					$('#categoryAdd').modal();
// 					ev.stop();
// 				}
			});
			
			bomGrid.on('click', (ev) => {
			    if (ev.targetType != "cell" || bomIsEditModeEnabled) {
					return;
				}

			    const newRowKey = ev.rowKey;
				
				// ìƒˆë¡œ ì¶”ê°€ëœ í–‰ì€ í´ë¦­ ì•ˆë˜ë„ë¡.
				if (bomGrid.getRow(newRowKey).isNew) {
					return;
				}

			    if (bomCurrentSelectedRowKey != null) {
			        bomGrid.removeRowClassName(bomCurrentSelectedRowKey, 'selected-row');
			    }

				if (bomDetailGrid) {
					bomDetailGrid.destroy(); // BOM ìƒì„¸ ì½”ë“œ ê·¸ë¦¬ë“œ ì œê±°
					bomDetailGrid = null;
				}
				
			    if (bomCurrentSelectedRowKey != newRowKey) {
			        bomGrid.addRowClassName(newRowKey, 'selected-row');
			        bomCurrentSelectedRowKey = newRowKey;
					
					// BOM ìƒì„¸ ê·¸ë¦¬ë“œ ìƒì„±
					const bomID = bomGrid.getRow(newRowKey).BOM_ID;
					// BOM ê°œìˆ˜ (í…Œì´ë¸”ì— ì¶”ê°€ í•„ìš”)
					const bomCount = bomGrid.getRow(newRowKey).BOM_QUANTITY;
					bomDetailInit(bomID, bomCount);
					bomCurrentSelectedID = bomID;
					//$("#btn_group_bomDetail").show();
			    } else {
			        // ê°™ì€ í–‰ì„ í´ë¦­í•œ ê²½ìš° ì„ íƒ í•´ì œ
			        bomCurrentSelectedRowKey = null;
					bomCurrentSelectedID = null;
					$("#btn_group_bomDetail").hide();
			    }
			});
		}
		
		// ìˆ˜ì • ëª¨ë“œ í† ê¸€ ë²„íŠ¼ ì´ë²¤íŠ¸
		$("#btn_bom_toggleEditMode").on("click", function () {
		    bomIsEditModeEnabled = !bomIsEditModeEnabled; // ìˆ˜ì • ëª¨ë“œ ìƒíƒœ í† ê¸€
		    
		    if (bomIsEditModeEnabled) {
				$("#btn_bom_add_row").show();
				$("#btn_bom_remove_row").show();
		    } else {
		    	$("#btn_bom_add_row").hide();
				$("#btn_bom_remove_row").hide();
		    }
		    
		    if (bomIsEditModeEnabled) {
		        bomGrid.setColumns([
		        	{header: 'BOM ì½”ë“œ *', name: 'BOM_ID', align: 'center', renderer: { type: TextInputBtnRenderer }},
		            {header: 'í’ˆëª© ì½”ë“œ *', name: 'ITEM_ID', align: 'left', renderer: { type: TextInputBtnRenderer }},
		            {header: 'í’ˆëª©ëª…', name: 'ITEM_NAME', align: 'left', editor: null},
		            {header: 'ìƒìœ„ ì½”ë“œ', name: 'PARENT_ID', align: 'left', editor: 'text', renderer: { type: TextInputRenderer }},
		            {header: 'BOM ê°œìˆ˜', name: 'BOM_QUANTITY', align: 'center'}
		        ]);
		    } else {
		        bomGrid.finishEditing();  // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì…€ ì¢…ë£Œë¥¼ ì•ˆí•˜ë©´ ìˆ˜ì •ëª¨ë“œ ì¢…ë£Œì‹œ ê°’ì´ ì´ˆê¸°í™” ë˜ë²„ë¦¼
		        bomGrid.setColumns(bom_columns);
		    }
		});

		$("#btn_bom_add_row").on("click", function () {
		    const newRowKey = bomGrid.appendRow(
		        {
		        	"BOM_ID": '',
		        	"ITEM_ID": '',
		        	"PARENT_ID": '',
		        	"BOM_QUANTITY": '',
		            isNew: true
		        },
		        {focus: true}
		    );
		});
		
		$("#btn_bom_remove_row").on("click", function () {
		    const rowCount = bomGrid.getRowCount(); // í˜„ì¬ í–‰ ê°œìˆ˜ ê°€ì ¸ì˜¤ê¸°
		    
		    const allRows = bomGrid.getData(); // ì „ì²´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
		    const newRows = allRows.filter(row => row.isNew); // ìƒˆë¡œ ì¶”ê°€ëœ í–‰ë§Œ í•„í„°ë§
		    
		    if (newRows.length === 0) {
		        alert("ì‚­ì œí•  ìˆ˜ ìˆëŠ” ì‹ ê·œ í–‰ì´ ì—†ìŠµë‹ˆë‹¤.");
		        return;
		    }

		    const lastRowKey = bomGrid.getRowAt(rowCount - 1).rowKey; // ë§ˆì§€ë§‰ í–‰ì˜ rowKey ê°€ì ¸ì˜¤ê¸°
		    bomGrid.removeRow(lastRowKey); // ë§ˆì§€ë§‰ í–‰ ì‚­ì œ
		});

		$("#btn_bom_modify").on("click", function() {
			bomGrid.finishEditing();  // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì…€ ì¢…ë£Œë¥¼ ì•ˆí•˜ë©´ ê°’ì´ ì´ˆê¸°í™” ë˜ë²„ë¦¼
			
		    let createdRows = bomGrid.getModifiedRows().createdRows;
		    let updatedRows = bomGrid.getModifiedRows().updatedRows;
		    
		    // í•„ìˆ˜ ì…ë ¥ ì»¬ëŸ¼
		    const requiredFields = ["BOM_ID", "ITEM_ID"];

		    let validCreatedRows = createdRows.filter(row =>
		        requiredFields.every(field => 
		        	row[field] && row[field].trim() !== ''
		        )
		    );
		    
		    let validUpdatedRows = updatedRows.filter(row =>
		        requiredFields.every(field => 
		        	row[field] && row[field].trim() !== ''
		        )
		    );
		    
		    if (createdRows.length == 0 && updatedRows.length == 0) {
		    	alert("ìˆ˜ì •ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
		        return;
		    }

			if (createdRows.length > 0) {
				if ((validCreatedRows.length == 0)
					|| (validCreatedRows.length != createdRows.length)) {
					alert("í•„ìˆ˜ê°’ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
			        return;
				}
			}
				
			if (updatedRows.length > 0 && validUpdatedRows.length == 0) {
				alert("í•„ìˆ˜ê°’ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
		        return;
			}
			
			bomGrid.request('modifyData');
			bomGrid.readData(1, null, true);  // ê·¸ë¦¬ë“œ ìƒˆë¡œê³ ì¹¨ 
			bomGrid.setColumns(bom_columns);  // ìˆ˜ì •ëª¨ë“œ í•´ì œ (ìƒˆë¡œ ë Œë”ë§)
			
			bomIsEditModeEnabled = false;
	    	$("#btn_bom_add_row").hide();
			$("#btn_bom_remove_row").hide();
		});
		
        $("#btn_bom_delete").on("click", function() {
			bomGrid.removeCheckedRows();
			
			// ë°˜ë“œì‹œ removeCheckedRows()í›„ì— ì‹¤í–‰ ìˆœì„œ
			// DELETEëŠ” bodyê°€ ì—†ê³  urlê³¼ headerë§Œ ìˆìŒ, ê¸°ë³¸ê°’ url -> urlëŒ€ì‹  headerì— ë‹´ì•„ ë³´ëƒ„
			const ids = bomGrid.getModifiedRows().deletedRows
				.map(row => encodeURIComponent(row.BOM_ID))  // í•œê¸€ ë³€í™˜
				.join(',');
			bomDataSource.api.deleteData.headers['X-Delete-IDs'] = ids;
			
		    bomGrid.request('deleteData');
			bomGrid.reloadData();  // ì‹¤íŒ¨ì‹œ í…Œì´ë¸” ë¦¬ë¡œë“œ
		});
		
		// BOM ìƒì„¸ ì½”ë“œ
		function bomDetailInit(bom_id, bomCount) {
			// íŒŒë¼ë¯¸í„° ì„¤ì •
			bomDetailDataSource.api.readData.initParams.bom_id = bom_id;
			
			if (bomDetailGrid) {
				bomDetailGrid.destroy(); // ê¸°ì¡´ ê·¸ë¦¬ë“œ ì œê±°
				bomDetailGrid = null;
			}
			
			bomDetailGrid = new tui.Grid({
		        el: document.getElementById('bomDetailGrid'),
		        data: bomDetailDataSource,
		        scrollX: true,
		        scrollY: true,
		        bodyHeight: 250,
		        rowHeaders: ['checkbox'],
		        columns: bomDetail_columns
		    });
			
			if (bomCount < 0) {
				$("#btn_group_bomDetail").hide();
			} else {
				$("#btn_group_bomDetail").show();
			}
			
		    bomDetailGrid.on('failResponse', function(ev) {
		        alert(JSON.parse(ev.xhr.responseText).message);
		    });
		}
		
		$("#btn_bomDetail_add").on("click", function() {
			console.log("BOM ìƒì„¸ ì €ì¥ ë²„íŠ¼ í´ë¦­!");
			
			console.log(bomDetailGrid.getData());
			
		    // ì €ì¥í•˜ê¸° ì „ì— BOM_ID ì¶”ê°€
			// BOM_ID ê°€ì ¸ì˜¤ê¸°
			const bomId = bomDetailDataSource.api.readData.initParams.bom_id;

			if (!bomId) {
			    alert("BOM IDê°€ ì—†ìŠµë‹ˆë‹¤.");
			    return;
			}

			// í˜„ì¬ ì¶”ê°€ëœ ë°ì´í„°ì˜ rowKey ê°€ì ¸ì˜¤ê¸°
			const newRows = bomDetailGrid.getModifiedRows().createdRows;

			if (newRows.length === 0) {
			    alert("ì¶”ê°€ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
			    return;
			}

			// ì‹ ê·œ ë°ì´í„°ì— BOM_ID ì¶”ê°€
			newRows.forEach(row => {
			    bomDetailGrid.setValue(row.rowKey, "BOM_ID", bomId);
			});		
			
			bomDetailGrid.request('createData');
			
			window.location.reload();
			//bomDetailGrid.reloadData();  // ì‹¤íŒ¨ì‹œ í…Œì´ë¸” ë¦¬ë¡œë“œ
		});
		
		$("#btn_bomDetail_modal").on("click", function() {
			console.log("BOM ìƒì„¸ ëª¨ë‹¬ ì—´ë¦¼!");
			$("#bomDetailAdd").modal();
		});
		
		$("#btn_bomDetail_delete").on("click", function() {
			bomDetailGrid.removeCheckedRows();
			
			// ë°˜ë“œì‹œ removeCheckedRows()í›„ì— ì‹¤í–‰ ìˆœì„œ
			// DELETEëŠ” bodyê°€ ì—†ê³  urlê³¼ headerë§Œ ìˆìŒ, ê¸°ë³¸ê°’ url -> urlëŒ€ì‹  headerì— ë‹´ì•„ ë³´ëƒ„
			const ids = bomDetailGrid.getModifiedRows().deletedRows
				.map(row => encodeURIComponent(row.BOM_DETAIL_ID))  // í•œê¸€ ë³€í™˜
				.join(',');
			bomDetailDataSource.api.deleteData.headers['X-Delete-IDs'] = ids;
			
			bomDetailGrid.request('deleteData');
			bomDetailGrid.reloadData();  // ì‹¤íŒ¨ì‹œ í…Œì´ë¸” ë¦¬ë¡œë“œ
		});
	</script>
</body>
</html>